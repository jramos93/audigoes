<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

	<p:panel rendered="#{consMB.status eq 'SEARCH'}">

		<p:panelGrid columns="5" styleClass="ui-panelgrid-blank">
			<p:outputLabel value="Fecha inicio" />
			<p:calendar id="consfechainicioaud" value="#{consMB.fechaInicio}"
				pattern="dd/MM/yyyy" />

			<p:outputLabel value="Fecha fin" />
			<p:calendar id="consfechafinaud" value="#{consMB.fechaFin}"
				pattern="dd/MM/yyyy" />

			<p:commandButton id="btnBuscarAuditorias" value="Buscar"
				icon="ui-icon ui-icon-check"
				actionListener="#{consMB.fillAuditoriasList}" update="dtAuditorias"
				process="@this consfechainicioaud consfechafinaud" />
		</p:panelGrid>
		<p:panelGrid columns="4" rendered="false"
			style="width:90%; margin: auto; text-align:center"
			styleClass="ui-panelgrid-blank">
			<p:panel>
				<p:panelGrid>
					<p:row>
						<p:column>
							<h:outputLabel value="Estado A"
								style="font-weight:bold !important; font-size:20px !important; vertical-align: bottom;"></h:outputLabel>
						</p:column>
						<p:column rowspan="2" style="text-align:right">
							<p:graphicImage url="/resources/images/icons/icon.png"
								style="vertical-align: middle; align:right" height="80"></p:graphicImage>
						</p:column>
					</p:row>
					<p:row>
						<p:column>
							<h:outputLabel value="##"
								style="font-weight:bold !important; font-size:26px !important; vertical-align: top;"></h:outputLabel>
						</p:column>
					</p:row>
				</p:panelGrid>
			</p:panel>
			<p:panel>
				<p:panelGrid>
					<p:row>
						<p:column>
							<h:outputLabel value="Estado A"
								style="font-weight:bold !important; font-size:20px !important; vertical-align: bottom;"></h:outputLabel>
						</p:column>
						<p:column rowspan="2" style="text-align:right">
							<p:graphicImage url="/resources/images/icons/icon.png"
								style="vertical-align: middle; align:right" height="80"></p:graphicImage>
						</p:column>
					</p:row>
					<p:row>
						<p:column>
							<h:outputLabel value="##"
								style="font-weight:bold !important; font-size:26px !important; vertical-align: top;"></h:outputLabel>
						</p:column>
					</p:row>
				</p:panelGrid>
			</p:panel>
			<p:panel>
				<p:panelGrid>
					<p:row>
						<p:column>
							<h:outputLabel value="Estado A"
								style="font-weight:bold !important; font-size:20px !important; vertical-align: bottom;"></h:outputLabel>
						</p:column>
						<p:column rowspan="2" style="text-align:right">
							<p:graphicImage url="/resources/images/icons/icon.png"
								style="vertical-align: middle; align:right" height="80"></p:graphicImage>
						</p:column>
					</p:row>
					<p:row>
						<p:column>
							<h:outputLabel value="##"
								style="font-weight:bold !important; font-size:26px !important; vertical-align: top;"></h:outputLabel>
						</p:column>
					</p:row>
				</p:panelGrid>
			</p:panel>
			<p:panel>
				<p:panelGrid>
					<p:row>
						<p:column>
							<h:outputLabel value="Estado A"
								style="font-weight:bold !important; font-size:20px !important; vertical-align: bottom;"></h:outputLabel>
						</p:column>
						<p:column rowspan="2" style="text-align:right">
							<p:graphicImage url="/resources/images/icons/icon.png"
								style="vertical-align: middle; align:right" height="80"></p:graphicImage>
						</p:column>
					</p:row>
					<p:row>
						<p:column>
							<h:outputLabel value="##"
								style="font-weight:bold !important; font-size:26px !important; vertical-align: top;"></h:outputLabel>
						</p:column>
					</p:row>
				</p:panelGrid>
			</p:panel>
		</p:panelGrid>

		<p:separator />

		<p:dataTable id="dtAuditorias" widgetVar="wvAuditorias" reflow="true"
			var="aud" style="margin-top:20px;" paginator="true"
			value="#{consMB.auditoriasList}" 
			filteredValue="#{consMB.filteredAuditorias}"
			rowsPerPageTemplate="10,15,20,25" rows="25"
			paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
			currentPageReportTemplate="{startRecord}-{endRecord} de {totalRecords} registros">

			<f:facet name="header">	Listado de Auditorías </f:facet>

			<p:column headerText="N°" sortBy="#{aud.audCorrelativo}"
				filterBy="#{aud.audCorrelativo}" filterMatchMode="contains">
				<h:outputText value="#{aud.audCorrelativo}" />
			</p:column>
			<p:column headerText="Año" sortBy="#{aud.audAnio}"
				filterBy="#{aud.audAnio}" filterMatchMode="contains">
				<h:outputText value="#{aud.audAnio}" />
			</p:column>
			<p:column headerText="Auditoría" sortBy="#{aud.audNombre}"
				filterBy="#{aud.audNombre}" filterMatchMode="contains">
				<h:outputText value="#{aud.audNombre}" />
			</p:column>
			<p:column headerText="Plan" sortBy="#{aud.planAnual.plaNombre}"
				filterBy="#{aud.planAnual.plaNombre}" filterMatchMode="contains">
				<h:outputText value="#{aud.planAnual.plaNombre}" />
			</p:column>
			<p:column headerText="Tipo Auditoría"
				sortBy="#{aud.tipoAuditoria.tpaNombre}"
				filterBy="#{aud.tipoAuditoria.tpaNombre}" filterMatchMode="contains">
				<h:outputText value="#{aud.tipoAuditoria.tpaNombre}" />
			</p:column>
			<p:column headerText="Fecha Inicio"
				sortBy="#{aud.audFechaInicioProgramado}">
				<h:outputText value="#{aud.audFechaInicioProgramado}">
					<f:convertDateTime pattern="dd-MM-yyyy" />
				</h:outputText>
			</p:column>
			<p:column headerText="Fecha Fin"
				sortBy="#{aud.audFechaFinProgramado}">
				<h:outputText value="#{aud.audFechaFinProgramado}">
					<f:convertDateTime pattern="dd-MM-yyyy" />
				</h:outputText>
			</p:column>
			<p:column headerText="Fase" filterBy="#{aud.audFase}"
				filterMatchMode="exact" style="text-align:center">
				<f:facet name="filter">
					<p:selectOneMenu onchange="PF('wvAuditorias').filter();">
						<f:selectItem itemLabel="-- Seleccione --" itemValue="#{null}"
							noSelectionOption="true" />
						<f:selectItems value="#{audMB.faseAuditoriaList}" />
					</p:selectOneMenu>
				</f:facet>
				<h:outputText value="#{aud.audFase}"
					converter="faseAuditoriaConverter" />
			</p:column>
			<p:column headerText="Detalle" style="text-align:center;">
				<p:commandButton id="btnDetAuditoria" update="@form :frmDetalleAuditoria"
					icon="ui-icon ui-icon-note"
					action="#{consMB.mostrarDetalleAuditoria}"
					styleClass="raised-btn" process="@this">
					<f:setPropertyActionListener value="#{aud}" target="#{consMB.auditoria}" />
				</p:commandButton>
			</p:column>
		</p:dataTable>
	</p:panel>
</ui:composition>