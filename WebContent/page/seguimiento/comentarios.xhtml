<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

	<h:form id="frmComentarios">
		<p:panel rendered="#{comMB.status eq 'NEW' or comMB.status eq 'EDIT'}">
			<div align="left" style="margin-top: 50px;">
				<p:commandButton id="btnCancelComentario" action="#{comMB.onCancel}"
					process="@this" value="Regresar" icon="pi pi-arrow-left"
					style="float:left;" update="@form :frmSeguimiento"
					actionListener="/audigoes/page/planeacion/auditoria.xhtml">
				</p:commandButton>
			</div>
			<div class="name" align="center" style="margin-top: 100px;">
				<span class="app-name">Comentarios</span>
			</div>
			<div class="ui-fluid p-formgrid p-grid">
				<p:panelGrid columns="1" columnClasses="ui-g-12" layout="grid"
					styleClass="ui-panelgrid-blank form-group form-elements">

					<p:outputLabel for="audRec" value="Auditoría:"
						style="font-weight:bold;" />
					<p:inputTextarea id="audRec" value="#{segMB.auditoria.audNombre}"
						rows="2" readonly="true" />
						
					<p:outputLabel for="cedulaselected" value="Hallazgo:"
						style="font-weight:bold;" />
					<p:inputTextarea id="cedulaselected" value="#{segMB.cedulaSelected.cedTitulo}"
						rows="2" readonly="true" />
				</p:panelGrid>
				<p:dataTable var="recm" value="#{recMB.listado}"
					expandedRow="single" expandableRowGroups="true"
					sortBy="#{recm.cedulaNota.cedTitulo}" widgetVar="wvRecomendaciones"
					id="dtRecomendacion" style="margin-top:20px;" paginator="true"
					rowKey="#{recm.recId}" paginatorPosition="bottom"
					rowsPerPageTemplate="5,10,15" rows="5"
					paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
					currentPageReportTemplate="{startRecord}-{endRecord} de {totalRecords} registros">
					<p:column headerText="Titulo Recomendación">
						<h:outputText value="#{recm.recTitulo}"></h:outputText>
					</p:column>
					<p:column headerText="Situación Encontrada">
						<h:outputText value="#{recm.recSituacion}"></h:outputText>
					</p:column>
				</p:dataTable>
			</div>
			<div class="ui-fluid p-formgrid p-grid">
				<p:tabView id="tvComentarios">
					<p:tab title="Comentarios de Unidad(es) Auditada(s)">
						<pe:ckEditor id="comentarioAuditado" width="100%"
							value="#{comMB.registro.comComentario}"
							readonly="#{!comMB.rolAuditado}" />
					</p:tab>
					<p:tab title="Comentarios de Auditoría">
						<pe:ckEditor id="comentarioAuditaria" width="100%"
							value="#{comMB.registro.comComentarioAuditoria}"
							readonly="#{!comMB.rolAuditor}" />
					</p:tab>
				</p:tabView>
				<p:panelGrid style="width:100%"
					styleClass="ui-panelgrid-blank form-group form-elements">
					<p:row style="text-align:center;">
						<p:column>
							<p:commandButton id="btnGuardarButtom"
								action="#{recMB.onSaveComentario}"
								value="Guardar Recomendación Pendiente"
								update="@form :frmSeguimiento" process="@this @form" />
						</p:column>
						<p:column>
							<p:commandButton id="btnEnProcesoButtom" styleClass="blue-btn"
								rendered="#{comMB.rolAuditor}"
								action="#{recMB.onSaveComentarioEnProceso}"
								value="Guardar Recomendación En Proceso"
								update="@form :frmSeguimiento" process="@this @form" />
						</p:column>
						<p:column>
							<p:commandButton id="btnImplementarButtom" styleClass="green-btn"
								action="#{recMB.onSaveImplementarRec}"
								value="Recomendación Implementada"
								rendered="#{comMB.rolAuditor}" update="@form :frmSeguimiento"
								process="@this @form">
								<p:confirm header="Confirmación"
									message="Al guardar comentario la recomendación quedará IMPLEMENTADA. ¿Desea continuar?"
									icon="pi pi-exclamation-triangle" />
							</p:commandButton>
						</p:column>
						<p:column>
							<p:commandButton id="btnNoImplementarButtom"
								styleClass="pink-btn" action="#{recMB.onSaveNoImplementarRec}"
								value="Recomendación No Implementada"
								rendered="#{comMB.rolAuditor}" update="@form :frmSeguimiento"
								process="@this @form">
								<p:confirm header="Confirmación"
									message="Al guardar comentario la recomendación quedará NO IMPLEMENTADA. ¿Desea continuar?"
									icon="pi pi-exclamation-triangle" />
							</p:commandButton>
						</p:column>
					</p:row>
				</p:panelGrid>
			</div>
		</p:panel>
	</h:form>

</ui:composition>
