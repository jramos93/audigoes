<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">


	<h:form id="frmProgramaEje">
		<p:panel rendered="#{audMB.status eq 'SEARCH' and pejeMB.status ne 'SEARCH' and proejeMB.status eq 'SEARCH'}">
			<div align="left" style="margin-top: 50px;">
				<p:commandButton id="btnCancel" action="#{pejeMB.onCancel}" process="@this"
					value="Regresar" icon="pi pi-arrow-left" style="float:left;"
					update=":frmPlanificacion, :frmProgramaEje" >
				</p:commandButton>
			</div>
			<div class="name" align="center" style="margin-top: 100px;">
				<span class="app-name">Programa de Ejecución </span>
			</div>


			<div class="ui-fluid p-formgrid p-grid">
				<p:panelGrid columns="1" columnClasses="ui-g-12" layout="grid"
					styleClass="ui-panelgrid-blank form-group form-elements">

					<p:outputLabel for="objg" value="Objetivo General:"
						style="font-weight:bold;" />
					<p:inputTextarea id="objg" value="#{pejeMB.registro.preObjG}"
						rows="4" required="true" maxlength="250" />

					<p:outputLabel for="obje" value="Objetivos Especificos:"
						style="font-weight:bold;" />
					<p:inputTextarea id="obje" value="#{pejeMB.registro.preObjE}"
						rows="4" required="true" maxlength="250" />
				</p:panelGrid>
				<p:panelGrid columns="4"
					columnClasses="ui-g-12 ui-md-4 ui-lg-2, ui-g-12 ui-md-8 ui-lg-4, ui-g-12 ui-md-4 ui-lg-2, ui-g-12 ui-md-8 ui-lg-4"
					layout="grid"
					styleClass="ui-panelgrid-blank form-group form-elements">

					<p:outputLabel for="obje" value="Fecha de inicio:"
						style="font-weight:bold;" />
					<p:calendar mode="inline" value="#{pejeMB.registro.preFechaInicio}"></p:calendar>

					<p:outputLabel for="obje" value="Fecha de fin:"
						style="font-weight:bold;" />
					<p:calendar mode="inline" value="#{pejeMB.registro.preFechaFin}"></p:calendar>
				</p:panelGrid>
				<p:panelGrid columns="2"
					columnClasses="ui-g-9 ui-lg-10,ui-g-3 ui-md-4 ui-lg-2"
					layout="grid"
					styleClass="ui-panelgrid-blank form-group form-elements">
					<p:column></p:column>
					<p:commandButton id="btn" value="Guardar" icon="fa fa-check"
						actionListener="#{pejeMB.onSave}" update=":frmProgramaEje" />
				</p:panelGrid>
			</div>

			<div class="ui-fluid p-formgrid p-grid">
				<div class="name" align="center">
					<span class="app-name">Procedimientos de Ejecución</span>
				</div>

				<p:panelGrid columns="4"
					columnClasses="ui-lg-1,ui-lg-1,ui-lg-1,ui-lg-1" layout="grid"
					styleClass="ui-panelgrid-blank form-group form-elements">
					<p:commandButton value="Agregar" icon="pi pi-plus"
						update=":frmProgramaEje, :frmProcedimientoEje"
						actionListener="#{proejeMB.onNew}">
					</p:commandButton>
					<p:commandButton value="Editar" icon="pi pi-pencil"
						update=":frmProgramaEje, :frmProcedimientoEje"
						rendered="#{proejeMB.registro.selected}"
						actionListener="#{proejeMB.onEditSelected}">
					</p:commandButton>
				</p:panelGrid>

				<p:dataTable var="p" value="#{proejeMB.listado}" rowIndexVar="index"
					widgetVar="wvProcEjecucion" reflow="true"
					id="dtProcEjecucion" style="margin-top:20px;" paginator="true"
					filteredValue="#{proejeMB.filteredProcedimiento}"
					globalFilterFunction="#{proejeMB.globalFilterFunction}"
					selection="#{proejeMB.regSelected}" selectionMode="single"
					paginatorPosition="top" rowsPerPageTemplate="1,5,10,15" rows="5"
					paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
					currentPageReportTemplate="{startRecord}-{endRecord} de {totalRecords} registros"
					rowKey="#{p.pejId}">

					<p:ajax event="rowSelect" listener="#{proejeMB.onRowSelect}"
						update=":frmProgramaEje" />

					<f:facet name="paginatorTopRight">
						<p:outputPanel>
							<h:outputText value="Búsqueda global: " />
							<p:inputText id="globalFilter"
								onkeyup="PF('wvProcEjecucion').filter();"
								style="width:150px" placeholder="Ingresa una palabra" />
						</p:outputPanel>
					</f:facet>

					<p:column headerText="No.">
						<h:outputText value="#{index+1}"></h:outputText>
					</p:column>

					<p:column headerText="Nombre">
						<h:outputText value="#{p.pejNombre}"></h:outputText>
					</p:column>

					<p:column headerText="Referencia">
						<h:outputText value="#{p.pejReferencia}"></h:outputText>
					</p:column>

					<p:column headerText="Fecha Elaboración">
						<h:outputText value="#{p.pejFechaElaboro}"></h:outputText>
					</p:column>

				</p:dataTable>
			</div>
		</p:panel>
	</h:form>

	<ui:include src="procedimiento-ejecucion.xhtml"></ui:include>

</ui:composition>
